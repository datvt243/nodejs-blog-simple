extends ../../_layouts/dashboard

block vars
  -title        = 'Admin page | Add post'
  -description  = ''
  -keywords     = ''
  -pageID       = 'top'
  -path         = '../..'
  if (data && data.edit)
    -path = '../../..'

block container

  // ./ Index
  section.section-wrapper
    .container
      .section-header
        h2.heading-primary 
          if (data && data.edit)
            | Chỉnh sửa bài viết
          else
            | Thêm Post mới
      .section-content
        .messages
        form.form#frmPost(method= data.method action= data.action enctype="multipart/form-data")
          .row
            .col.col-md-9
              if (data && data.edit)
                input.form-control(type='hidden' name="id" id="id" value= data.post.id)
              .mb-4
                label.form-label Tiêu đề
                input.form-control(type='text' placeholder='Nhập tiêu đề ...' name="title" id="title" value= data.post.title)
              .mb-4
                label.form-label Thể loại
                select.form-select(name="category" id="category")
                  option() -- Chọn thể loại
                  if (data.category)
                    each item in data.category
                      if item.id == data.post.category
                        option(value=item.id selected)= item.name
                      else
                        option(value=item.id)= item.name
              .mb-4
                label.form-label Mô tả ngắn
                textarea.form-control(cols='3' placeholder='Nhập mô tả ngắn ...' name="shotDes" id="shotDes")= data.post.shotDes
              .mb-4
                label.form-label Content
                textarea.form-control.editor(cols='8' rows="8" placeholder='Nhập mô tả ...' name="content" id="editor")= data.post.content
              hr
              .mb-4
                label.form-label Mete Title
                input.form-control(type='text' placeholder='Nhập Mete Title ...' name="metaTitle" id="metaTitle" value= data.post.metaTitle)
              .mb-4
                label.form-label Mete Description
                input.form-control(type='text' placeholder='Nhập Mete Description ...' name="metaDes" id="metaDes" value= data.post.metaDes)
            .col.col-md-3
              if (data && !data.edit)
                .text-end
                  button.btn.btn-success(type="submit") Thêm mới
              else
                .row.justify-content-end.align-items-center
                  .col.col-auto
                    button.btn.btn-warning(type="button" class="js-post-edit" ) Chỉnh sửa
                  .col.col-auto
                    button.btn.btn-danger(type="button" class="js-post-delete") Xóa
              hr
              .mb-4
                .form-check
                  if (!data.post.isPublish)
                    input.form-check-input(type='checkbox' id="isPublish" name="isPublish" value= data.post.isPublish checked='checked')
                  else
                    input.form-check-input(type='checkbox' id="isPublish" name="isPublish" value= data.post.isPublish)
                  label.form-check-label(for="isPublish") Publish
              hr
              if (data.post && data.post.author)
                .mb-2
                  p
                    | Người đăng:
                    | &nbsp;
                    span= data.post.author
              if (data.post && data.post.createdAt)
                .mb-2
                  p
                    | Ngày tạo:
                    | &nbsp;
                    span= data.post.createdAt
              if (data.post && data.post.pubishedAt)
                .mb-2
                  p 
                    | Ngày đăng:
                    | &nbsp;
                    span= data.post.pubishedAt
              if (data.post && data.post.updatedAt)
                .mb-2
                  p
                    | Ngày chỉnh sửa:
                    | &nbsp;
                    span= data.post.updatedAt
              if (data.post && (data.post.createdAt || data.post.pubishedAt || data.post.updatedAt))
                hr
              .mb-2
                label.form-label(for='thumbnail') Thumbnail
                input.form-control(type='file' name="thumbnail" id="thumbnail")
              hr
              .mb-2
                label.form-label Tags
                input.form-control(type='text' placeholder='Tags ...' name="tag" id="tag" value= data.post.tag)
          hr
          .row
            .col-auto
              if (data && !data.edit)
                button.btn.btn-success(type="submit") Thêm mới
              else
                .row
                  .col.col-auto
                    button.btn.btn-warning(type="button" class="js-post-edit" ) Chỉnh sửa
                  .col.col-auto
                    button.btn.btn-danger(type="button" class="js-post-delete") Xóa

block scripts
  script(src="https://cdn.ckeditor.com/ckeditor5/29.1.0/classic/ckeditor.js")
  script.
    let editor
    ClassicEditor
      .create( document.querySelector( '#editor' ) )
      .then( newEditor => {
        editor = newEditor;
      } )
      .catch( error => {
          console.error( error );
      } );

  
      
